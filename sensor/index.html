<!DOCTYPE html>
<html>
<body>

<div id="content">
</div>

<script>
const xhttp = new XMLHttpRequest();
xhttp.onload = function() {
  if (this.status !== 200) return;

  var znalezione = [];
  const jsonData = JSON.parse(this.responseText);
  
  for (let i = 0; i < jsonData.length; i++) {
    if (jsonData[i].location && jsonData[i].location.id == 10857) {
      for (let y = 0; y < jsonData[i].sensordatavalues.length; y++) {
        znalezione.push(jsonData[i].sensordatavalues[y]);
      }
    }
  }

  var wynik = { pm10: null, pm25: null, temp: null, humid: null };

  for (let x = 0; x < znalezione.length; x++) {
    let val = znalezione[x].value;
    switch (znalezione[x].value_type) {
      case "P1":          wynik.pm10 = val;  break;
      case "P2":          wynik.pm25 = val;  break;
      case "temperature": wynik.temp = val;  break;
      case "humidity":    wynik.humid = val; break;
    }
  }

  document.getElementById("content").innerHTML = JSON.stringify(wynik);
}
xhttp.open("GET", "https://data.sensor.community/static/v2/data.json");
xhttp.send();
</script>

</body>
</html>
